"""의도 분석을 위한 Gemini 프롬프트"""

def get_intent_analysis_prompt(goal: str, country_info: str = "") -> str:
    """의도 분석용 프롬프트 생성"""
    return f"""# 사용자 의도 파악을 위한 4가지 선택지 생성 프롬프트

## 목적
사용자가 애매하거나 추상적인 목표를 말했을 때, 그들이 실제로 원하는 것이 무엇인지 파악하기 위한 4가지 구체적인 선택지를 생성합니다. 이를 통해 사용자의 진짜 의도를 빠르게 파악하고 맞춤형 도움을 제공할 수 있습니다.

## 의도 분류 기준
1. **"어떻게 할까?"** - 시작점/접근법 (첫 발걸음, 방법론)
2. **"뭐가 필요해?"** - 준비물/조건 (리소스, 도구, 환경)
3. **"뭘 선택할까?"** - 구체적 옵션 (종류, 타입, 스타일)
4. **"뭘 조심할까?"** - 주의점/현실적 팁 (장애물, 실수 방지)

## 선택지 생성 규칙
* 4가지 분류에서 각각 1개씩 선택지 생성
* 같은 카테고리로 치우치지 않기 (예: 모두 "종류" 관련 X)
* 각 선택지는 다른 관점에서 사용자를 도와야 함
* 중복되거나 유사한 선택지 금지

## 선택 우선순위 (상황별)
* 긴급한 느낌 → 즉시 실행 가능한 것 우선
* 계획적인 느낌 → 준비 단계부터 차근차근
* 고민이 많은 느낌 → 선택지와 장단점 중심
* 경험 공유 느낌 → 주의사항과 팁 중심

## 사용자 수준 반영
* 각 선택지에 난이도 암시적 포함
* 초보자 → 중급자 → 고급자 순서로 배치
* 예: "처음 시작" → "기초 다지기" → "실력 향상" → "전문가 되기"

## 응답 형식 규칙
* title: 핵심 키워드 2-3개 (5-10자)
* description: 구체적인 선택지를 포함한 질문 (20-35자)
* 의미 전달이 우선, 글자 수는 가이드라인
* 너무 전문적이거나 기술적인 용어 피하기

## description 작성 가이드
* 구체적인 선택지나 범위 제시 (예: "10만원? 100만원?")
* 2-3개의 대표적인 옵션 나열 (예: "독학? 부트캠프? 온라인?")
* 사용자의 상황을 구체화하는 질문 (예: "혼자? 함께?")
* 실질적인 도움 제안 (예: "~도움 필요하신가요?")
* 단순 질문보다는 선택 가능한 옵션 제시

## 특수 상황 처리
* **너무 구체적인 경우**: 
  - 예: "파이썬으로 웹 크롤러 만들기" 
  - 대응: 더 큰 맥락 제시 (프로젝트 목적, 활용 방안 등)
  
* **너무 추상적인 경우**:
  - 예: "행복해지고 싶어"
  - 대응: 가장 보편적인 해석 3가지 + 명확화 질문 1개
  
* **다중 목표인 경우**:
  - 예: "운동도 하고 공부도 하고 싶어"
  - 대응: 우선순위 파악 또는 통합적 접근 제시

## 단계별 사고 과정 (Chain of Thought)

### 1단계: 사용자 의도 분석
- 사용자의 목표가 무엇인지 파악
- 추상적 정도 판단 (매우 구체적 ↔ 매우 추상적)
- 긴급도/계획성 파악
- 예상 사용자 수준 (초보자/경험자)

### 2단계: 4가지 분류별 선택지 구상
- "어떻게 할까?" → 가능한 시작 방법들 나열 후 가장 대표적인 3-4개 선택
- "뭐가 필요해?" → 필수/선택 리소스 구분 후 핵심 요소 추출
- "뭘 선택할까?" → 주요 카테고리나 타입 분류
- "뭘 조심할까?" → 흔한 실수나 주의사항 중 가장 중요한 것 선택

### 3단계: 선택지 차별화 검증
- 각 선택지가 다른 관점인지 확인
- 중복되는 내용 제거
- 사용자가 명확히 구분할 수 있는지 검토

### 4단계: Description 구체화
- 각 선택지별로 2-3개의 구체적 옵션 포함
- 사용자가 바로 고를 수 있는 선택지인지 확인
- 전문용어를 쉬운 표현으로 변경

### 5단계: 최종 JSON 생성
- 위 과정을 거쳐 정제된 4개 선택지를 JSON 형식으로 출력

## 응답 형식 (JSON)
```json
[
  {{
    "title": "핵심 키워드 2-3개로 구성된 제목",
    "description": "구체적인 옵션을 포함한 질문",
    "icon": "관련 이모지"
  }}
]
```

## 예시 1
사용자 입력: "여행 가고 싶어"
응답:
```json
[
  {{
    "title": "여행 계획",
    "description": "혼자 갈까요, 함께 갈까요?",
    "icon": "📝"
  }},
  {{
    "title": "여행 예산",
    "description": "10만원? 100만원? 그 이상?",
    "icon": "💰"
  }},
  {{
    "title": "여행지 선택",
    "description": "국내 여행? 해외 여행?",
    "icon": "🗺️"
  }},
  {{
    "title": "여행 주의사항",
    "description": "여행 보험이나 준비물 궁금하신가요?",
    "icon": "⚠️"
  }}
]
```

## 예시 2
사용자 입력: "운동 시작하고 싶어"
응답:
```json
[
  {{
    "title": "운동 시작법",
    "description": "홈트? 헬스장? 야외 운동?",
    "icon": "🚀"
  }},
  {{
    "title": "운동 준비물",
    "description": "운동복, 기구 추천 필요하신가요?",
    "icon": "🎒"
  }},
  {{
    "title": "운동 종류",
    "description": "근력? 유산소? 스트레칭?",
    "icon": "🏃"
  }},
  {{
    "title": "부상 예방",
    "description": "준비운동, 자세 교정 알려드릴까요?",
    "icon": "⚠️"
  }}
]
```

## 예시 3
사용자 입력: "프로그래밍 배우고 싶어"
응답:
```json
[
  {{
    "title": "학습 방법",
    "description": "독학? 부트캠프? 온라인 강의?",
    "icon": "📚"
  }},
  {{
    "title": "개발 환경",
    "description": "컴퓨터 사양, 프로그램 설치 도움 필요?",
    "icon": "💻"
  }},
  {{
    "title": "언어 선택",
    "description": "웹? 앱? 데이터 분석? 게임?",
    "icon": "🔤"
  }},
  {{
    "title": "초보자 실수",
    "description": "포기하지 않는 학습 전략 필요하신가요?",
    "icon": "⚠️"
  }}
]
```

## 예시 4
사용자 입력: "돈 벌고 싶어"
응답:
```json
[
  {{
    "title": "수익 창출법",
    "description": "부업? 창업? 투자? 이직?",
    "icon": "💡"
  }},
  {{
    "title": "필요 자원",
    "description": "시간? 자본금? 기술? 인맥?",
    "icon": "🔧"
  }},
  {{
    "title": "수익 모델",
    "description": "단기 수익? 장기 투자? 패시브 인컴?",
    "icon": "💸"
  }},
  {{
    "title": "위험 관리",
    "description": "사기 예방, 세금 처리 정보 필요하신가요?",
    "icon": "⚠️"
  }}
]
```

## 예시 5
사용자 입력: "건강해지고 싶어"
응답:
```json
[
  {{
    "title": "건강 관리법",
    "description": "식단? 운동? 수면? 스트레스 관리?",
    "icon": "🌱"
  }},
  {{
    "title": "건강 검진",
    "description": "병원 검진, 체크리스트 필요하신가요?",
    "icon": "🏥"
  }},
  {{
    "title": "생활 습관",
    "description": "금연? 금주? 다이어트? 규칙적 생활?",
    "icon": "🎯"
  }},
  {{
    "title": "주의 신호",
    "description": "놓치기 쉬운 건강 적신호 알려드릴까요?",
    "icon": "⚠️"
  }}
]
```

## 최종 검증
□ 4개 선택지가 각각 다른 분류에 속하는가?
□ 선택지끼리 겹치는 부분이 없는가?
□ description에 구체적인 옵션이 포함되어 있는가?
□ 사용자가 바로 선택할 수 있을 만큼 명확한가?
□ 너무 전문적이거나 어려운 용어는 없는가?
□ 각 선택지가 실질적인 다음 단계로 이어지는가?

---

## 사용 방법

사용자 입력: "{goal}"
{country_info}

**응답 생성 과정**:
1. 먼저 사용자의 "{goal}"를 분석하여 의도와 상황을 파악합니다
2. 4가지 분류 기준에 따라 각각의 선택지를 구상합니다
3. 선택지들이 서로 겹치지 않고 명확히 구분되는지 확인합니다
4. 각 description에 구체적인 옵션 2-3개를 포함시킵니다
5. 최종적으로 아래 JSON 형식으로 출력합니다

```json
[
  {{
    "title": "분류1에 해당하는 제목",
    "description": "구체적 옵션을 포함한 질문",
    "icon": "적절한 이모지"
  }},
  {{
    "title": "분류2에 해당하는 제목",
    "description": "구체적 옵션을 포함한 질문",
    "icon": "적절한 이모지"
  }},
  {{
    "title": "분류3에 해당하는 제목",
    "description": "구체적 옵션을 포함한 질문",
    "icon": "적절한 이모지"
  }},
  {{
    "title": "분류4에 해당하는 제목",
    "description": "구체적 옵션을 포함한 질문",
    "icon": "적절한 이모지"
  }}
]
```

**중요**: 
- 위 5단계를 거쳐 신중하게 선택지를 생성하세요
- 정확히 4개의 선택지만 생성하고, 각 선택지가 4가지 분류 기준에 맞게 하나씩 배치되도록 하세요
- description은 반드시 구체적인 선택 옵션을 2-3개 이상 포함해야 합니다
- 사용자가 즉시 선택할 수 있는 명확한 옵션을 제시하세요"""